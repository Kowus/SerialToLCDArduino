#include <MicroView.h>
// #include "icons.c"

extern const uint8_t up[];


String inputString = "";
boolean stringComplete = false;


void setup() {
  Serial.begin(9600);
  uView.begin();
  uView.clear(PAGE);
  inputString.reserve(200);
  // uView.invert(true);
  // uView.setColor(WHITE);

  uView.setCursor(0, 0);
  uView.println("MicroView");


  // uView.drawChar((LCDWIDTH/2), (LCDHEIGHT/2), up, WHITE, NORM);



  uView.display();
}

void loop() {
  serialEvent();
  // put your main code here, to run repeatedly:

  printToUview();
  checkSerialEvent();


}




void serialEvent() {
  while (Serial.available()) {
    // get the new byte:
    char inChar = (char)Serial.read();
    // add it to the inputString:
    inputString += inChar;
    
    // if the incoming character is a newline, set a flag
    // so the main loop can do something about it:
    if (inChar == '\n') {
      stringComplete = true;
    }
  }
}

void checkSerialEvent() {
  if (stringComplete) {
    
    Serial.println(inputString);
    // clear the string:
    inputString = "";
    stringComplete = false;
  }
}

void printToUview() {
  if (inputString == "clear") {
    uView.rectFill(0, 0, LCDWIDTH, LCDHEIGHT, BLACK, NORM);
    //uView.clear(NORM);
    uView.setCursor(0, 0);
    uView.println("Serial I/O");
    uView.display();
  } else {
    uView.setCursor(0, 8);
    uView.print(inputString);
    uView.display();
  }
}
